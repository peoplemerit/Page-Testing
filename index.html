<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PMERIT â€” Accessible Global Education</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ===============================================================
       PMERIT INDEX (Dashboard moved up; spacing tuned)
       =============================================================== */

    :root{
      --global:#2563EB;
      --local:#16A34A;
      --accent:#7C3AED;
      --bg:#ffffff;
      --bg2:#f8fafc;
      --card:#ffffff;
      --ink:#1e293b;
      --muted:#64748b;
      --border:#e2e8f0;
      --shadow:0 4px 6px -1px rgba(0,0,0,.08),0 2px 4px -1px rgba(0,0,0,.06);
      --trans:all .25s ease;
    }
    .dark{ --bg:#0f172a; --bg2:#1e293b; --card:#1f2937; --ink:#e5e7eb; --muted:#94a3b8; --border:#334155; --shadow:0 4px 10px rgba(0,0,0,.35); }

    html,body{height:100vh;}
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Noto Sans;
      transition:var(--trans); overflow:hidden; display:flex; flex-direction:column;
    }

    /* Header */
    header{flex:0 0 auto; display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.75rem 1rem; background:var(--bg2); box-shadow:var(--shadow);} 
    .logo{font-weight:800; font-size:1.25rem; color:var(--global);} .logo span{color:var(--local);} 
    nav{display:flex; align-items:center; gap:.5rem; flex-wrap:wrap;}
    select,.btn{border:1px solid var(--border); background:transparent; color:var(--ink); padding:.5rem .75rem; border-radius:.5rem; font-weight:600; cursor:pointer; transition:var(--trans);} 
    .btn:hover{border-color:var(--global); color:var(--global);} .btn.primary{background:var(--global); color:#fff; border-color:var(--global);} .btn.primary:hover{filter:brightness(.95);} 
    .link{background:none;border:none;color:var(--ink);cursor:pointer;font-weight:600;} .link:hover{color:var(--global);} 

    /* Estate */
    .estate{flex:1 1 auto; display:grid; grid-template-columns: 280px minmax(560px,1fr) 340px; gap:0; height:calc(100vh - 62px); max-height:calc(100vh - 62px); overflow:hidden;}
    aside.left, main.center, aside.right{height:100%; background:var(--bg);} 
    aside.left{background:var(--bg2); border-right:1px solid var(--border); padding:1rem; display:flex; flex-direction:column; gap:.75rem; overflow:auto;}
    .pane-title{font-weight:800; color:var(--global); margin:.25rem 0;}
    .action,.toggle{display:flex; align-items:center; justify-content:space-between; gap:.75rem; padding:.6rem .75rem; border:1px solid var(--border); border-radius:.65rem; background:transparent; color:var(--ink); cursor:pointer; transition:var(--trans);} 
    .action:hover,.toggle:hover{border-color:var(--global);} .icon{color:var(--global); margin-right:.5rem;}

    /* Collapsible Settings */
    .collapsible{border:1px solid var(--border); border-radius:.75rem; background:var(--card); overflow:hidden;}
    .collapsible > .head{display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding:.65rem .75rem; cursor:pointer; background:var(--bg);} 
    .collapsible > .head h4{margin:0; font-size:.95rem; color:var(--global);} 
    .collapsible .body{padding:.6rem; display:grid; gap:.5rem;}
    .switch{width:42px;height:22px;background:#cbd5e1;border-radius:999px;position:relative;flex:0 0 auto;} 
    .switch::after{content:"";position:absolute;left:2px;top:2px;width:18px;height:18px;background:#fff;border-radius:999px;transition:var(--trans);} 
    .toggle.active .switch{background:var(--global);} .toggle.active .switch::after{left:22px;}

    /* Sidebar buttons */
    .dashboard{ /* moved up: no auto margin */
      margin-top:.25rem; display:flex; gap:.5rem; align-items:center; justify-content:center;
      padding:.75rem .9rem; border:none; border-radius:.75rem; background:var(--global); color:#fff; font-weight:800; box-shadow:var(--shadow);
    } 
    .dashboard.guest{background:#64748b;}
    .avatar{width:100px;height:100px;border-radius:999px; margin-top:auto; /* stick avatar to bottom */ 
            background:linear-gradient(135deg, var(--global), var(--local)); display:grid;place-items:center;color:#fff;font-size:2rem;border:3px solid var(--border);} 

    /* Center */
    main.center{padding:1rem; display:flex; flex-direction:column; gap:.75rem; overflow:hidden;} 
    .panel{background:var(--card); border:1px solid var(--border); border-radius:1rem; box-shadow:var(--shadow); height:100%; display:flex; flex-direction:column; overflow:hidden;} 
    .panel-head{background:var(--bg2); border-bottom:1px solid var(--border); padding:1rem; display:flex; gap:12px; align-items:center;} 
    .vh-blob{width:72px;height:72px;border-radius:999px;border:2px solid var(--global); overflow:hidden; flex:0 0 auto; background:#e2e8f0; position:relative;} 
    .vh-blob .mouth{position:absolute; left:50%; top:44px; width:24px; height:8px; transform:translateX(-50%); background:#1e293b; border-radius:0 0 10px 10px;} 
    .head-txt{display:flex; flex-direction:column; gap:.25rem;} 
    .head-txt h1{margin:0; font-size:1.15rem; color:var(--global);} 
    .tagline{font-size:.95rem; color:var(--muted);} 
    .badges{display:flex; gap:.4rem; flex-wrap:wrap;} 
    .badge{background:var(--global); color:#fff; font-size:.75rem; padding:.25rem .6rem; border-radius:999px; display:inline-flex; align-items:center; gap:.3rem;} 
    .badge.support{background:var(--local);} 

    /* Text Chat view */
    #textChat{display:flex; flex-direction:column; height:100%;}
    .chat-body{flex:1 1 auto; overflow:auto; padding:1rem; display:flex; flex-direction:column; gap:.9rem;}
    .bubble{display:flex; gap:.65rem; align-items:flex-start; background:rgba(37,99,235,.06); border:1px solid rgba(37,99,235,.18); border-radius:.75rem; padding:1rem;} 
    .ava{min-width:36px;height:36px;border-radius:999px; display:grid; place-items:center; color:#fff; background:linear-gradient(135deg, var(--global), var(--local));}
    .bubble h3{margin:.1rem 0 .35rem; color:var(--global); font-size:1rem;} 
    .bubble p{margin:.3rem 0; line-height:1.55;} 
    .bubble ul, .bubble ol{margin:.5rem 0 .5rem 1.25rem;} 
    .chat-input{border-top:1px solid var(--border); padding:.75rem; background:var(--bg2);}  /* reduced padding */
    textarea{width:100%; min-height:80px; /* was 90 */ resize:none; background:var(--bg); color:var(--ink); border:1px solid var(--border); border-radius:.65rem; padding:.7rem;} 
    textarea:focus{outline:none; box-shadow:0 0 0 3px rgba(37,99,235,.18); border-color:var(--global);} 
    .input-bar{display:flex; align-items:center; justify-content:space-between; margin-top:.45rem;} 
    .count{font-size:.9rem; color:var(--muted);} .send{border:none; background:var(--global); color:#fff; padding:.55rem 1rem; border-radius:.5rem; font-weight:700; cursor:pointer;}

    /* Virtual Human stage (full switch) */
    #vhStage{display:none; flex-direction:column; height:100%;}
    .stage{flex:1 1 auto; display:grid; place-items:center; background:var(--bg); padding:1rem; overflow:hidden;} 
    .human-frame{width:min(680px, 90%); height:min(420px, 55vh); border:2px solid var(--global); border-radius:1rem; box-shadow:var(--shadow); display:grid; place-items:center; background:linear-gradient(135deg,#e2e8f0,#f8fafc); position:relative;} 
    .human-face{width:120px;height:120px;border-radius:999px;background:linear-gradient(135deg,var(--global),var(--local)); display:grid;place-items:center;color:#fff;font-size:3rem;border:4px solid #fff; box-shadow:var(--shadow);} 
    .captions{border-top:1px solid var(--border); background:var(--bg2); padding:.75rem 1rem; color:var(--muted); font-size:.95rem;}

    /* Right pane */
    aside.right{background:var(--bg2); border-left:1px solid var(--border); padding:1rem; overflow:hidden;} 
    aside.right h3{margin:.25rem 0 .75rem; position:relative; padding-bottom:.35rem;} 
    aside.right h3::after{content:""; position:absolute; left:0; bottom:0; width:48px; height:3px; background:var(--global); border-radius:2px;} 
    .cards{display:grid; gap:.6rem; grid-auto-rows:1fr;} 
    .card{background:var(--card); border:1px solid var(--border); border-left:4px solid var(--global); border-radius:.75rem; padding:.9rem; box-shadow:var(--shadow); display:flex; flex-direction:column; justify-content:space-between; min-height:120px;} 
    .card:nth-of-type(2){border-left-color:var(--local);} .card:nth-of-type(3){border-left-color:var(--accent);} 
    .card h4{margin:.1rem 0 .35rem; display:flex; gap:.5rem; align-items:center; font-size:1rem;} 
    .card p{margin:0 0 .6rem; color:var(--muted); font-size:.92rem; line-height:1.35;} 
    .cta{width:100%; border:none; border-radius:.5rem; padding:.5rem .8rem; background:var(--global); color:#fff; font-weight:700;}

    /* Footer */
    footer{flex:0 0 auto; border-top:1px solid var(--border); background:var(--bg2); padding:.35rem .75rem; font-size:.9rem; display:flex; gap:1rem; justify-content:center; flex-wrap:wrap;} 
    footer a{color:var(--muted); text-decoration:none;} footer a:hover{color:var(--global);} 
    .btn-ghost{border:1px solid var(--border); border-radius:.5rem; padding:.25rem .6rem; background:transparent; cursor:pointer;}

    /* Responsive */
    @media (max-width:1100px){
      .estate{grid-template-columns:1fr; grid-template-rows:auto auto 1fr; height:auto; max-height:none; overflow:visible;}
      body{overflow:auto;} 
      aside.left{order:1;} main.center{order:2;} aside.right{order:3;}
    }
    @media (max-width:768px){
      aside.right{display:none;} .reveal-right{display:block;}
      header{gap:.5rem; padding:.6rem .75rem;} .vh-blob{width:60px;height:60px;}
    }

    .btn:focus,.action:focus,.toggle:focus,.dashboard:focus,.cta:focus,textarea:focus,select:focus,.btn-ghost:focus{outline:2px dashed var(--global); outline-offset:2px;}
  </style>
</head>
<body>
  <header>
    <div class="logo">P<span>MERIT</span></div>
    <nav>
      <button class="link" id="donateLink">Donate</button>
      <select id="lang">
        <option value="en">English</option>
        <option value="yo">YorÃ¹bÃ¡</option>
        <option value="ig">Igbo</option>
        <option value="ha">Hausa</option>
        <option value="es">EspaÃ±ol</option>
        <option value="fr">FranÃ§ais</option>
        <option value="pt">PortuguÃªs</option>
      </select>
      <button class="btn" id="signInBtn">Sign In</button>
      <button class="btn primary" id="startBtn">Start Learning</button>
    </nav>
  </header>

  <div class="estate">
    <!-- Left -->
    <aside class="left">
      <div>
        <div class="pane-title">Quick Actions</div>

        <button class="toggle active" id="vhToggle">
          <span><i class="fas fa-user icon"></i> Virtual Human Mode</span>
          <span class="switch"></span>
        </button>

        <button class="action" id="careerPaths">
          <span><i class="fas fa-compass icon"></i> Career Track & Explore Paths</span>
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </button>

        <button class="toggle" id="supportToggle">
          <span><i class="fas fa-headset icon"></i> Customer Service Mode</span>
          <span class="switch"></span>
        </button>
      </div>

      <!-- Collapsible Settings -->
      <div class="collapsible" id="settingsBox">
        <div class="head">
          <h4><i class="fas fa-sliders"></i> Settings</h4>
          <i class="fas fa-chevron-down" aria-hidden="true"></i>
        </div>
        <div class="body">
          <button class="toggle" id="darkToggle">
            <span><i class="fas fa-moon icon"></i> Dark Mode</span>
            <span class="switch"></span>
          </button>
          <button class="toggle active" id="ttsToggle">
            <span><i class="fas fa-volume-up icon"></i> Text-to-Speech</span>
            <span class="switch"></span>
          </button>
        </div>
      </div>

      <!-- Dashboard is now directly under Settings -->
      <button class="dashboard guest" id="dashBtn"><i class="fas fa-gauge"></i>&nbsp;Dashboard</button>

      <!-- Avatar anchored to the very bottom -->
      <div class="avatar" id="vhAvatar" title="Virtual Human">
        <i class="fas fa-user"></i>
      </div>
    </aside>

    <!-- Center -->
    <main class="center">
      <section class="panel">
        <div class="panel-head">
          <div class="vh-blob"><div class="mouth" id="mouth"></div></div>
          <div class="head-txt">
            <h1 id="panelTitle"><i class="fas fa-robot"></i> PMERIT AI â€” <span id="vhName">EduGuide Alex</span></h1>
            <div class="tagline">
              <div>Empowering Learning Through Innovation</div>
              <div>Accessible, high-quality education for global opportunities</div>
            </div>
            <div class="badges">
              <span class="badge" id="vhBadge"><i class="fas fa-user"></i> Virtual Human</span>
              <span class="badge support" id="supportBadge" style="display:none"><i class="fas fa-headset"></i> Support Assistant</span>
            </div>
          </div>
        </div>

        <!-- Text Chat view -->
        <div id="textChat">
          <div class="chat-body" id="chatBody">
            <article class="bubble">
              <div class="ava"><i class="fas fa-user"></i></div>
              <div>
                <h3>Welcome to PMERIT!</h3>
                <p>I'm <span id="introName">Alex</span>, your virtual learning assistant. Explore courses, career tracks, and assessments freely as a guest. Sign in to save your progress and get personalized recommendations.</p>
                <p>I can help you with:</p>
                <ul>
                  <li>Course recommendations based on your interests</li>
                  <li>Career path exploration</li>
                  <li>Study strategies and scheduling</li>
                  <li>Real-time Q&amp;A during lessons</li>
                </ul>
              </div>
            </article>

            <article class="bubble">
              <div class="ava"><i class="fas fa-user"></i></div>
              <div>
                <h3>Getting started</h3>
                <p>Would you like to:</p>
                <ol>
                  <li>Take a quick learning-style assessment?</li>
                  <li>Explore remote-friendly career paths?</li>
                  <li>Jump into a beginner course?</li>
                </ol>
              </div>
            </article>
          </div>

          <div class="chat-input">
            <textarea id="chatInput" maxlength="500" placeholder="Ask about courses, learning paths, or your goals..."></textarea>
            <div class="input-bar">
              <span class="count" id="count">0/500</span>
              <button class="send" id="sendBtn">Send <i class="fas fa-paper-plane"></i></button>
            </div>
          </div>
        </div>

        <!-- Virtual Human stage view -->
        <div id="vhStage" style="display:none">
          <div class="stage">
            <div class="human-frame">
              <div class="human-face"><i class="fas fa-user"></i></div>
            </div>
          </div>
          <div class="captions" id="captions">Virtual Human is speakingâ€¦</div>
        </div>
      </section>
    </main>

    <!-- Right -->
    <aside class="right" id="rightPane">
      <h3>Discover Your Path</h3>
      <div class="cards">
        <div class="card">
          <h4><i class="fas fa-graduation-cap"></i> Learning Style Assessment</h4>
          <p>Find how you learn best and personalize your experience to maximize outcomes.</p>
          <button class="cta" data-link="#todo-assessment">Start Assessment</button>
        </div>
        <div class="card">
          <h4><i class="fas fa-heart"></i> Interest Profiler</h4>
          <p>Explore subjects and fields that match your natural interests.</p>
          <button class="cta" data-link="#todo-interest">Discover Interests</button>
        </div>
        <div class="card">
          <h4><i class="fas fa-chart-line"></i> Skills Assessment</h4>
          <p>Assess your current abilities and identify growth opportunities.</p>
          <button class="cta" data-link="#todo-skills">Evaluate Skills</button>
        </div>
      </div>
    </aside>
  </div>

  <footer>
    <a href="#privacy">Privacy & Terms</a>
    <a href="#contact">Contact</a>
    <a href="#partners">Partnerships</a>
    <a href="#support">Support</a>
    <button class="btn-ghost" id="toggleRight">Toggle Assessments</button>
  </footer>

  <!-- Tracks Modal -->
  <dialog id="tracksModal" style="border:none;border-radius:12px;max-width:560px;width:92%;box-shadow:var(--shadow);background:var(--card);color:var(--ink)">
    <form method="dialog" style="margin:0;padding:1rem 1rem 1.1rem;">
      <h3 style="margin:.25rem 0 1rem; color:var(--global); display:flex; gap:.5rem; align-items:center"><i class="fas fa-compass"></i> Explore Career Tracks</h3>
      <div id="tracksList" style="display:grid; gap:.5rem;"></div>
      <div style="display:flex; justify-content:flex-end; gap:.5rem; margin-top:1rem">
        <button class="btn" value="cancel">Close</button>
      </div>
    </form>
  </dialog>

  <script>
    const $ = (s,r=document)=>r.querySelector(s); const $$=(s,r=document)=>Array.from(r.querySelectorAll(s));

    // Elements
    const body=document.body;
    const settingsBox=$('#settingsBox'); const settingsHead=settingsBox.querySelector('.head'); const settingsBody=settingsBox.querySelector('.body');
    const darkToggle=$('#darkToggle'); const ttsToggle=$('#ttsToggle'); const vhToggle=$('#vhToggle'); const supportToggle=$('#supportToggle');
    const dashBtn=$('#dashBtn'); const vhAvatar=$('#vhAvatar'); const vhBadge=$('#vhBadge'); const supportBadge=$('#supportBadge');
    const chatInput=$('#chatInput'); const count=$('#count'); const sendBtn=$('#sendBtn'); const chatBody=$('#chatBody');
    const mouth=$('#mouth'); const vhName=$('#vhName');
    const rightPane=$('#rightPane'); const toggleRight=$('#toggleRight');
    const tracksModal=$('#tracksModal'); const tracksList=$('#tracksList'); const careerPathsBtn=$('#careerPaths');
    const textChat=$('#textChat'); const vhStage=$('#vhStage');

    // App state
    const state={auth:false,dark:false,vhMode:false,supportMode:false,tts:true,guide:'EduGuide Alex'};

    const CAREER_TRACKS=[
      "Software Development (Full-stack)","Data Analytics","UI/UX Design","Digital Marketing","Customer Support (Remote)","Virtual Assistance / Operations","Cloud & DevOps (Intro)"
    ];

    // Init
    function init(){
      try{
        state.dark = localStorage.getItem('pmerit_dark') === 'true';
        state.auth = localStorage.getItem('pmerit_auth') === 'true';
        state.tts  = localStorage.getItem('pmerit_tts') !== 'false';
      }catch{}
      body.classList.toggle('dark', state.dark);
      if(state.dark) darkToggle.classList.add('active');
      if(state.tts) ttsToggle.classList.add('active');
      dashBtn.classList.toggle('guest', !state.auth);

      // build tracks
      tracksList.innerHTML = CAREER_TRACKS.map((t,i)=>`<button class="action" value="${i}" style="justify-content:flex-start"><i class="fas fa-arrow-right icon"></i><span>${t}</span></button>`).join('');

      // Default collapsed settings on smaller screens
      if(window.innerWidth <= 1280){ settingsBody.style.display='none'; }

      updateView();
      updateCount();
    }

    function save(k,v){ try{localStorage.setItem(k,String(v));}catch{} }
    function updateCount(){ count.textContent = (chatInput.value||'').length + '/500'; }

    function speak(text){
      if(!state.tts) return;
      if(!('speechSynthesis' in window)){ alert('Text-to-Speech is not supported on this browser.'); return; }
      const u=new SpeechSynthesisUtterance(text); u.rate=.95; u.pitch=1; u.volume=1;
      u.onstart=()=>{ mouth.style.animation='speak .28s infinite'; };
      u.onend=()=>{ mouth.style.animation='none'; };
      speechSynthesis.speak(u);
    }

    // Collapsible Settings
    settingsHead.addEventListener('click',()=>{
      const open = settingsBody.style.display !== 'none';
      settingsBody.style.display = open ? 'none' : 'grid';
      settingsHead.querySelector('i.fas').className = open ? 'fas fa-chevron-right' : 'fas fa-chevron-down';
    });

    // Toggles
    darkToggle.addEventListener('click',()=>{
      darkToggle.classList.toggle('active'); state.dark = darkToggle.classList.contains('active'); body.classList.toggle('dark',state.dark); save('pmerit_dark',state.dark);
    });
    ttsToggle.addEventListener('click',()=>{ ttsToggle.classList.toggle('active'); state.tts = ttsToggle.classList.contains('active'); save('pmerit_tts',state.tts); });
    supportToggle.addEventListener('click',()=>{
      supportToggle.classList.toggle('active'); state.supportMode = supportToggle.classList.contains('active');
      supportBadge.style.display = state.supportMode ? 'inline-flex' : 'none';
      $('#panelTitle').innerHTML = state.supportMode ? '<i class="fas fa-headset"></i> Support Assistant' : '<i class="fas fa-robot"></i> PMERIT AI â€” <span id="vhName">'+state.guide+'</span>';
    });
    vhToggle.addEventListener('click',()=>{ vhToggle.classList.toggle('active'); state.vhMode = vhToggle.classList.contains('active'); updateView(); });

    function updateView(){
      if(state.vhMode){
        textChat.style.display='none'; vhStage.style.display='flex'; vhAvatar.style.display=''; vhBadge.style.display='inline-flex';
      }else{
        textChat.style.display='flex'; vhStage.style.display='none'; vhAvatar.style.display='none'; vhBadge.style.display='none';
      }
    }

    // Demo: dashboard
    dashBtn.addEventListener('click',()=>{ if(state.auth){ alert('Redirecting to dashboard.html'); } else { alert('Please sign up to access your dashboard.'); } });

    // Language placeholder
    $('#lang').addEventListener('change',e=> console.log('Language set:', e.target.value));

    // Sign-in demo flip
    $('#signInBtn').addEventListener('click',()=>{ state.auth=!state.auth; save('pmerit_auth', state.auth); dashBtn.classList.toggle('guest', !state.auth); alert(state.auth ? 'Signed in (demo). Dashboard enabled.' : 'Signed out (demo).'); });

    // Start Learning demo
    $('#startBtn').addEventListener('click',()=> alert('Starting learning journeyâ€¦'));

    // Chat send
    chatInput.addEventListener('input', updateCount);
    sendBtn.addEventListener('click',()=>{
      const text=(chatInput.value||'').trim(); if(!text) return;
      const me=document.createElement('article'); me.className='bubble';
      me.innerHTML='<div class="ava" style="background:#4f46e5"><i class="fas fa-user"></i></div><div><h3>You</h3><p></p></div>'; me.querySelector('p').textContent=text; chatBody.appendChild(me);
      setTimeout(()=>{
        const ai=document.createElement('article'); ai.className='bubble';
        ai.innerHTML='<div class="ava"><i class="fas fa-user"></i></div><div><h3>'+state.guide+'</h3><p>Based on your interest, consider starting with remote-friendly tracks like Software Development, Data Analytics, or Digital Marketing. Would you like tailored course suggestions?</p></div>';
        chatBody.appendChild(ai); chatBody.scrollTop=chatBody.scrollHeight; speak('Consider starting with remote friendly tracks like Software Development, Data Analytics, or Digital Marketing.');
      },600);
      chatInput.value=''; updateCount();
    });

    // Tracks modal
    careerPathsBtn.addEventListener('click',()=>{ if(typeof tracksModal.showModal==='function'){ tracksModal.showModal(); } else { alert('Tracks:\n- '+CAREER_TRACKS.join('\n- ')); } });
    tracksList.addEventListener('click', e=>{ const btn=e.target.closest('button.action'); if(!btn) return; const idx=Number(btn.value); alert('Selected: '+CAREER_TRACKS[idx]); });

    // Right pane toggle (mobile)
    toggleRight.addEventListener('click',()=>{ rightPane.classList.toggle('reveal-right'); if(rightPane.classList.contains('reveal-right')){ rightPane.style.display='block'; } else { rightPane.style.display='none'; } });

    // breathing
    (function breathe(){ const blob=$('.vh-blob'); let s=1,d=-0.001; setInterval(()=>{ s+=d; if(s>1.005)d=-0.001; if(s<0.995)d=0.001; blob.style.transform='scale('+s+')'; },50); })();
    const kf=document.createElement('style'); kf.textContent='@keyframes speak{0%{height:8px}50%{height:4px}100%{height:8px}}'; document.head.appendChild(kf);

    init();
  </script>
</body>
</html>
